{% extends '/layout.html.twig' %}

{% block title %}Advanced Search{% endblock %}

{% block body %}
<div class="container">

    <script type="text/javascript">
        Promise.all([WBDB.data.promise, WBDB.ui.promise]).then(function() {
            var latest_cards = WBDB.search.latestCards();

            $('#q').typeahead({
                hint: true,
                highlight: true,
                minLength: 2
            }, {
                display: function(card) { return card.title; },
                source: WBDB.search.findMatches(latest_cards),
            });
        });

        $(function () {
            $('#faction-select').multiselect({
                buttonWidth: '100%'
            });
        })
    </script>

    <div class="row">

        <div class="col">

            <h1>{{ block('title') }}</h1>
            <form id="advanced_search_form" method="GET" action="{{ path('cards_processSearchForm') }}" role="form" style="margin-bottom:2em">

                <fieldset>
                    <legend>Title and texts</legend>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label for="q">Title</label>
                                <div class="input-group">
                                    <input class="form-control" placeholder="Card Search" size="200" id="q" name="q" value="">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="x">Text</label>
                                <div>
                                    <input class="form-control" size="40" id="x" name="x" value="">
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="a">Flavor Text</label>
                                <div>
                                    <input class="form-control" size="30" id="a" name="a" value="">
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset>
                <fieldset>
                    <legend>Guild</legend>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Guild</label>
                                <select name="g[]" id="faction-select" multiple="multiple" class="hidden">
                                    <option value="earth">Earth Guild</option>
                                    <option value="moon">Moon Guild</option>
                                    <option value="stars">Stars Guild</option>
                                    <option value="void">Void Guild</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </fieldset>
                <fieldset>
                    <legend>Attributes</legend>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="e">Set</label>
                                <div>
                                    <select class="form-control" name="e" id="e"><option value="">any</option>{% for pack in packs %}<option value="{{ pack.code }}">{{ pack.name }}</option>{% endfor %}</select>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="t">Type</label>
                                <div>
                                    <select class="form-control" name="t" id="t"><option value="">any</option>{% for type in types %}<option value="{{ type }}">{{ type }}</option>{% endfor %}</select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label for="s">Traits</label>
                                <div>
                                    <select class="form-control" name="s" id="s"><option value="">any</option>{% for keyword in keywords %}<option value="{{ keyword }}">{{ keyword }}</option>{% endfor %}</select>
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset>
                <fieldset>
                    <legend>Numerics</legend>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label for="o">Cost</label>
                                <div class="row">
                                    <div class="col-xs-4">
                                        <select name="oo" id="oo" class="form-control"><option value=":">=</option><option value="<">&lt;</option><option value=">">&gt;</option></select>
                                    </div>
                                    <div class="col-xs-8">
                                        <input id="o" name="o" value="" class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label for="p">Strength</label>
                                <div class="row">
                                    <div class="col-xs-4">
                                        <select name="po" id="po" class="form-control"><option value=":">=</option><option value="<">&lt;</option><option value=">">&gt;</option></select>
                                    </div>
                                    <div class="col-xs-8">
                                        <input id="p" name="p" value="" class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label for="h">Health</label>
                                <div class="row">
                                    <div class="col-xs-4">
                                        <select name="ho" id="ho" class="form-control"><option value=":">=</option><option value="<">&lt;</option><option value=">">&gt;</option></select>
                                    </div>
                                    <div class="col-xs-8">
                                        <input id="h" name="h" value="" class="form-control">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset>
                <fieldset>
                    <legend>Other</legend>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label>Previews</label>
                                <select class="form-control" name="r">
                                    <option value="">Yes</option>
                                    <option value="<now">No</option>
                                    <option value=">now">Only</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="i">Illustrator</label>
                                <div>
                                    <select class="form-control" name="i" id="i"><option value="">any</option>{% for illustrator in illustrators %}<option value="{{ illustrator }}">{{ illustrator }}</option>{% endfor %}</select>
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset>
                <fieldset>
                    <legend>Submit</legend>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                {% include '/Search/searchoptions.html.twig' %}
                                <div class="col-sm-4">
                                    <button class="btn btn-primary" type="submit">Search</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </fieldset>
            </form>

        </div>

    </div>

</div>
{% endblock %}
